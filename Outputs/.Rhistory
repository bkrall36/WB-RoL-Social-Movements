result <- reg$coefficients[, 0:3]
result <- reg$coefficients[0:3]
result <- reg[0:3]
View(result)
result <- reg$coeftable
View(result)
for (i in 1:28){
result[i] <- reg[i]$coeftable
}
# Store regression results
result <- c()
for (i in 1:28){
result[i] <- reg[i]$coeftable
}
result[i] <- reg[i]$coeftable
for (i in 1:26){
result[i] <- reg[i]$coeftable
}
View(result)
for (i in 1:26){
result[i+1] <- reg[i+1]$coeftable
}
View(result)
reg1 <- feols(clean_pslm_data$`POPULATION THAT HAS EVER ATTENDED SCHOOL BY-PROVINCE AND DISTRICTS 2.1` ~ treated | province_id, clean_pslm_data)
reg2 <- feols(clean_pslm_data$`PERCENTAGE DISTRIBUTION OF POPULATION THAT COMPLETED PRIMARY LEVEL OR HIGHER 2.2` ~ treated | province_id, clean_pslm_data)
reg3 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE PRIMARY LEVEL(AGE 6-10)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.3(a)` ~ treated | province_id, clean_pslm_data)
reg4 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE PRIMARY LEVEL(AGE 5-9)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.3(b)` ~ treated | province_id, clean_pslm_data)
reg5 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE PRIMARY LEVEL(AGE 4-9)- BY PROVINCE & DISTRICT(INCLUDING KATCHI CLASS) 2.4` ~ treated | province_id, clean_pslm_data)
reg6 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO FOR GOVERNMENT PRIMARY SCHOOLS (AGE 5-9) - BY PROVINCE & DISTRICT 2.5` ~ treated | province_id, clean_pslm_data)
reg7 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE PRIMARY LEVEL(AGE 6-10)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.6(a)` ~ treated | province_id, clean_pslm_data)
reg8 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE PRIMARY LEVEL(AGE 5-9)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.6(b)` ~ treated | province_id, clean_pslm_data)
reg9 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE PRIMARY LEVEL(AGE 4-9)- BY PROVINCE & DISTRICT(INCLUDING KATCHI CLASS) 2.7` ~ treated | province_id, clean_pslm_data)
reg10 <- feols(clean_pslm_data$`NET ENROLMENT RATE IN GOVERNMENT PRIMARY SCHOOLS (AGE 5-9)- BY PROVINCE & DISTRICT (EXCLUDING KATCHI CLASS) 2.8` ~ treated | province_id, clean_pslm_data)
reg11 <- feols(clean_pslm_data$`PRIMARY LEVEL ENROLMENT IN GOVERNMENT SCHOOLS A PERCENTAGE OF TOTAL PRIMARY 2.9(a)` ~ treated | province_id, clean_pslm_data)
reg12 <- feols(clean_pslm_data$`PRIMARY LEVEL ENROLMENT IN GOVERNMENT SCHOOLS A PERCENTAGE OF TOTAL PRIMARY ENROLMENT - BY PROVINCE AND DISTRICT 2.9(b)` ~ treated | province_id, clean_pslm_data)
reg13 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MIDDLE LEVEL (AGE 11-13) - BY PROVINCE & DISTRICT 2.10(a)` ~ treated | province_id, clean_pslm_data)
reg14 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MIDDLE LEVEL (AGE 10-12)- BY PROVINCE & DISTRICT 2.10(b)` ~ treated | province_id, clean_pslm_data)
reg15 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MIDDLE LEVEL (AGE 11-13)- BY PROVINCE & DISTRICT 2.11(a)` ~ treated | province_id, clean_pslm_data)
reg16 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MIDDLE LEVEL (AGE 10-12)- BY PROVINCE & DISTRICT 2.11(b)` ~ treated | province_id, clean_pslm_data)
reg17 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MATRIC LEVEL(AGE 14-15)- BY PROVINCE AND DISTRICT 2.12(a)` ~ treated | province_id, clean_pslm_data)
reg18 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MATRIC LEVEL (AGE 13-14)- BY PROVINCE & DISTRICT 2.12(b)` ~ treated | province_id, clean_pslm_data)
reg19 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MATRIC LEVEL (AGE 14-15) - BY PROVINCE & REGION 2.13(a)` ~ treated | province_id, clean_pslm_data)
reg20 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MATRIC LEVEL (AGE 13-14)- BY PROVINCE & DISTRICT 2.13(b)` ~ treated | province_id, clean_pslm_data)
reg21 <- feols(clean_pslm_data$`IMMUNISATION BASED ON RECALL 3.4(a): AT LEAST 1 IMMUNISATION` ~ treated | province_id, clean_pslm_data)
reg22 <- feols(clean_pslm_data$`IMMUNISATION BASED ON RECORD 3.4(b): FULLY IMMUNIZED` ~ treated | province_id, clean_pslm_data)
reg23 <- feols(clean_pslm_data$`IMMUNISATION BASED ON RECALL AND RECORD 3.4(c): FULLY IMMUNIZED` ~ treated | province_id, clean_pslm_data)
reg24 <- feols(clean_pslm_data$`CHILDREN SUFFERING FROM DIARRHEA IN PAST 15 DAYS 3.7` ~ treated | province_id, clean_pslm_data)
reg25 <- feols(clean_pslm_data$`PRE-NATAL CONSULTATION 3.10` ~ treated | province_id, clean_pslm_data)
reg27 <- feols(clean_pslm_data$`POST NATAL CONSULTATIONS 3.13` ~ treated | province_id, clean_pslm_data)
result20 <- reg20$coeftable
result1 <- reg1$coeftable
result2 <- reg2$coeftable
result3 <- reg3$coeftable
result4 <- reg4$coeftable
result5 <- reg5$coeftable
result6 <- reg6$coeftable
result7 <- reg7$coeftable
result8 <- reg8$coeftable
result9 <- reg9$coeftable
result10 <- reg10$coeftable
result11 <- reg11$coeftable
result12 <- reg12$coeftable
result13 <- reg13$coeftable
result14 <- reg14$coeftable
result15 <- reg15$coeftable
result16 <- reg16$coeftable
result17 <- reg17$coeftable
result18 <- reg18$coeftable
result19 <- reg19$coeftable
result20 <- reg20$coeftable
result21 <- reg21$coeftable
result22 <- reg22$coeftable
result23 <- reg23$coeftable
result24 <- reg24$coeftable
result25 <- reg25$coeftable
reg25 <- feols(clean_pslm_data$`PRE-NATAL CONSULTATION 3.10` ~ treated | province_id, clean_pslm_data)
# Manually run all regression
reg1 <- feols(clean_pslm_data$`POPULATION THAT HAS EVER ATTENDED SCHOOL BY-PROVINCE AND DISTRICTS 2.1` ~ treated | province_id, clean_pslm_data)
reg2 <- feols(clean_pslm_data$`PERCENTAGE DISTRIBUTION OF POPULATION THAT COMPLETED PRIMARY LEVEL OR HIGHER 2.2` ~ treated | province_id, clean_pslm_data)
reg3 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE PRIMARY LEVEL(AGE 6-10)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.3(a)` ~ treated | province_id, clean_pslm_data)
reg4 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE PRIMARY LEVEL(AGE 5-9)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.3(b)` ~ treated | province_id, clean_pslm_data)
reg5 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE PRIMARY LEVEL(AGE 4-9)- BY PROVINCE & DISTRICT(INCLUDING KATCHI CLASS) 2.4` ~ treated | province_id, clean_pslm_data)
reg6 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO FOR GOVERNMENT PRIMARY SCHOOLS (AGE 5-9) - BY PROVINCE & DISTRICT 2.5` ~ treated | province_id, clean_pslm_data)
reg7 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE PRIMARY LEVEL(AGE 6-10)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.6(a)` ~ treated | province_id, clean_pslm_data)
reg8 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE PRIMARY LEVEL(AGE 5-9)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.6(b)` ~ treated | province_id, clean_pslm_data)
reg9 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE PRIMARY LEVEL(AGE 4-9)- BY PROVINCE & DISTRICT(INCLUDING KATCHI CLASS) 2.7` ~ treated | province_id, clean_pslm_data)
reg10 <- feols(clean_pslm_data$`NET ENROLMENT RATE IN GOVERNMENT PRIMARY SCHOOLS (AGE 5-9)- BY PROVINCE & DISTRICT (EXCLUDING KATCHI CLASS) 2.8` ~ treated | province_id, clean_pslm_data)
reg11 <- feols(clean_pslm_data$`PRIMARY LEVEL ENROLMENT IN GOVERNMENT SCHOOLS A PERCENTAGE OF TOTAL PRIMARY 2.9(a)` ~ treated | province_id, clean_pslm_data)
reg12 <- feols(clean_pslm_data$`PRIMARY LEVEL ENROLMENT IN GOVERNMENT SCHOOLS A PERCENTAGE OF TOTAL PRIMARY ENROLMENT - BY PROVINCE AND DISTRICT 2.9(b)` ~ treated | province_id, clean_pslm_data)
reg13 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MIDDLE LEVEL (AGE 11-13) - BY PROVINCE & DISTRICT 2.10(a)` ~ treated | province_id, clean_pslm_data)
reg14 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MIDDLE LEVEL (AGE 10-12)- BY PROVINCE & DISTRICT 2.10(b)` ~ treated | province_id, clean_pslm_data)
reg15 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MIDDLE LEVEL (AGE 11-13)- BY PROVINCE & DISTRICT 2.11(a)` ~ treated | province_id, clean_pslm_data)
reg16 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MIDDLE LEVEL (AGE 10-12)- BY PROVINCE & DISTRICT 2.11(b)` ~ treated | province_id, clean_pslm_data)
reg17 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MATRIC LEVEL(AGE 14-15)- BY PROVINCE AND DISTRICT 2.12(a)` ~ treated | province_id, clean_pslm_data)
reg18 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MATRIC LEVEL (AGE 13-14)- BY PROVINCE & DISTRICT 2.12(b)` ~ treated | province_id, clean_pslm_data)
reg19 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MATRIC LEVEL (AGE 14-15) - BY PROVINCE & REGION 2.13(a)` ~ treated | province_id, clean_pslm_data)
reg20 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MATRIC LEVEL (AGE 13-14)- BY PROVINCE & DISTRICT 2.13(b)` ~ treated | province_id, clean_pslm_data)
reg21 <- feols(clean_pslm_data$`IMMUNISATION BASED ON RECALL 3.4(a): AT LEAST 1 IMMUNISATION` ~ treated | province_id, clean_pslm_data)
reg22 <- feols(clean_pslm_data$`IMMUNISATION BASED ON RECORD 3.4(b): FULLY IMMUNIZED` ~ treated | province_id, clean_pslm_data)
reg23 <- feols(clean_pslm_data$`IMMUNISATION BASED ON RECALL AND RECORD 3.4(c): FULLY IMMUNIZED` ~ treated | province_id, clean_pslm_data)
reg24 <- feols(clean_pslm_data$`CHILDREN SUFFERING FROM DIARRHEA IN PAST 15 DAYS 3.7` ~ treated | province_id, clean_pslm_data)
reg25 <- feols(clean_pslm_data$`PREGNANT WOMEN WHO RECEIVED TETANUS TOXOID INJECTION 3.11` ~ treated | province_id, clean_pslm_data)
reg26 <- feols(clean_pslm_data$`POST NATAL CONSULTATIONS 3.13` ~ treated | province_id, clean_pslm_data)
# Manually run all regression
reg1 <- feols(clean_pslm_data$`POPULATION THAT HAS EVER ATTENDED SCHOOL BY-PROVINCE AND DISTRICTS 2.1` ~ treated | province_id, clean_pslm_data)
reg2 <- feols(clean_pslm_data$`PERCENTAGE DISTRIBUTION OF POPULATION THAT COMPLETED PRIMARY LEVEL OR HIGHER 2.2` ~ treated | province_id, clean_pslm_data)
reg3 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE PRIMARY LEVEL(AGE 6-10)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.3(a)` ~ treated | province_id, clean_pslm_data)
reg4 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE PRIMARY LEVEL(AGE 5-9)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.3(b)` ~ treated | province_id, clean_pslm_data)
reg5 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE PRIMARY LEVEL(AGE 4-9)- BY PROVINCE & DISTRICT(INCLUDING KATCHI CLASS) 2.4` ~ treated | province_id, clean_pslm_data)
reg6 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO FOR GOVERNMENT PRIMARY SCHOOLS (AGE 5-9) - BY PROVINCE & DISTRICT 2.5` ~ treated | province_id, clean_pslm_data)
reg7 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE PRIMARY LEVEL(AGE 6-10)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.6(a)` ~ treated | province_id, clean_pslm_data)
reg8 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE PRIMARY LEVEL(AGE 5-9)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.6(b)` ~ treated | province_id, clean_pslm_data)
reg9 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE PRIMARY LEVEL(AGE 4-9)- BY PROVINCE & DISTRICT(INCLUDING KATCHI CLASS) 2.7` ~ treated | province_id, clean_pslm_data)
reg10 <- feols(clean_pslm_data$`NET ENROLMENT RATE IN GOVERNMENT PRIMARY SCHOOLS (AGE 5-9)- BY PROVINCE & DISTRICT (EXCLUDING KATCHI CLASS) 2.8` ~ treated | province_id, clean_pslm_data)
reg11 <- feols(clean_pslm_data$`PRIMARY LEVEL ENROLMENT IN GOVERNMENT SCHOOLS A PERCENTAGE OF TOTAL PRIMARY 2.9(a)` ~ treated | province_id, clean_pslm_data)
reg12 <- feols(clean_pslm_data$`PRIMARY LEVEL ENROLMENT IN GOVERNMENT SCHOOLS A PERCENTAGE OF TOTAL PRIMARY ENROLMENT - BY PROVINCE AND DISTRICT 2.9(b)` ~ treated | province_id, clean_pslm_data)
reg13 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MIDDLE LEVEL (AGE 11-13) - BY PROVINCE & DISTRICT 2.10(a)` ~ treated | province_id, clean_pslm_data)
reg14 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MIDDLE LEVEL (AGE 10-12)- BY PROVINCE & DISTRICT 2.10(b)` ~ treated | province_id, clean_pslm_data)
reg15 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MIDDLE LEVEL (AGE 11-13)- BY PROVINCE & DISTRICT 2.11(a)` ~ treated | province_id, clean_pslm_data)
reg16 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MIDDLE LEVEL (AGE 10-12)- BY PROVINCE & DISTRICT 2.11(b)` ~ treated | province_id, clean_pslm_data)
reg17 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MATRIC LEVEL(AGE 14-15)- BY PROVINCE AND DISTRICT 2.12(a)` ~ treated | province_id, clean_pslm_data)
reg18 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MATRIC LEVEL (AGE 13-14)- BY PROVINCE & DISTRICT 2.12(b)` ~ treated | province_id, clean_pslm_data)
reg19 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MATRIC LEVEL (AGE 14-15) - BY PROVINCE & REGION 2.13(a)` ~ treated | province_id, clean_pslm_data)
reg20 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MATRIC LEVEL (AGE 13-14)- BY PROVINCE & DISTRICT 2.13(b)` ~ treated | province_id, clean_pslm_data)
reg21 <- feols(clean_pslm_data$`IMMUNISATION BASED ON RECALL 3.4(a): AT LEAST 1 IMMUNISATION` ~ treated | province_id, clean_pslm_data)
reg22 <- feols(clean_pslm_data$`IMMUNISATION BASED ON RECORD 3.4(b): FULLY IMMUNIZED` ~ treated | province_id, clean_pslm_data)
reg23 <- feols(clean_pslm_data$`IMMUNISATION BASED ON RECALL AND RECORD 3.4(c): FULLY IMMUNIZED` ~ treated | province_id, clean_pslm_data)
reg24 <- feols(clean_pslm_data$`CHILDREN SUFFERING FROM DIARRHEA IN PAST 15 DAYS 3.7` ~ treated | province_id, clean_pslm_data)
# Store regression results manually
result1 <- reg1$coeftable
result2 <- reg2$coeftable
result3 <- reg3$coeftable
result4 <- reg4$coeftable
result5 <- reg5$coeftable
result6 <- reg6$coeftable
result7 <- reg7$coeftable
result8 <- reg8$coeftable
result9 <- reg9$coeftable
result10 <- reg10$coeftable
result11 <- reg11$coeftable
result12 <- reg12$coeftable
result13 <- reg13$coeftable
result14 <- reg14$coeftable
result15 <- reg15$coeftable
result16 <- reg16$coeftable
result17 <- reg17$coeftable
result18 <- reg18$coeftable
result19 <- reg19$coeftable
result20 <- reg20$coeftable
result21 <- reg21$coeftable
result22 <- reg22$coeftable
result23 <- reg23$coeftable
result24 <- reg24$coeftable
balance_table <- rbind(result1, result2, result3)
View(balance_table)
balance_table <- rbind(result1, result2, result3, result4, result5, result6, result7. result8, result9, result10, result11, result12, result13, result14, result15, result16, result17, result18, result19, result20, result21, result22, result23, result24)
balance_table <- rbind(result1, result2, result3, result4, result5, result6, result7, result8, result9, result10, result11, result12, result13, result14, result15, result16, result17, result18, result19, result20, result21, result22, result23, result24)
View(balance_table)
# Change row names
row.names(balance_table) <- clean_pslm_data[4:26]
# Change row names
row.names(balance_table) <- clean_pslm_data[4:27]
View(balance_table)
# Change row names
row.names(balance_table) <- clean_pslm_data[, 4:27]
View(clean_pslm_data)
# Change row names
print(clean_pslm_data[, 4:27])
# Change row names
colnames <- colnames(clean_pslm_data)
colnames <- colnames[4:28]
row.names(balance_table) <- colnames
View(balance_table)
View(balance_table)
row.names(balance_table) <- colnames
colnames <- colnames[4:29]
row.names(balance_table) <- colnames
colnames <- colnames[4:28]
row.names(balance_table) <- colnames
colnames <- colnames[4:29]
row.names(balance_table) <- colnames
colnames <- colnames[4:29]
colnames <- colnames[1:31]
rm(list = ls())
clean_elections_data <- 1 # Cleans elections data
clean_pslm_data  <- 1 # Cleans Pakistan social and living standards measurement data
table01_balance <- 1 # Creates balance table
table02_DiDregression <- 1 # Creates regression tables (PML)
table03_eventstudyregression <- 1 # Create regression table for event study
fig01_bargraphs <- 1 # Creates bar graph for parties means
fig02_differenceinmeans <- 1 # Creates difference in means tables
fig03_paralleltrends <- 1 # Creates parallel trends graphs
fig04_eventstudy <- 1 # Creates event study graph
if (Sys.getenv("USER") == "") {
#  data_path <- "SULTAN DROP BOX LINK"
github_path <- "C:/Users/brend/OneDrive/Documents/GitHub/WB-RoL-Social-Movements/"
}
Inputs <- paste0(github_path, 'Inputs/')
Outputs <- paste0(github_path, 'Outputs/')
Code <- paste0(github_path, 'Code/')
packages <- c(
"readxl",
"magrittr",
"stringr",
"dplyr",
"ggplot2",
"tidyr",
"purrr",
"broom",
"lmtest",
"multiwayvcov",
"sandwich",
"stargazer",
"readr",
"gridExtra",
"modelsummary",
"fixest")
sapply(packages, function(x) {
if (!(x %in% installed.packages())) {
install.packages(x, dependencies = TRUE)
}
})
invisible(sapply(packages, require, character.only = TRUE))
setwd(Outputs)
# Grouping Data by Treatment Status
# Create a list that contains districts that were visited by chief justice in 2007
treated_districts <- c('Islamabad', 'Rawalpindi', 'Sukkur', 'Hyderabad', 'Peshawar', 'Lahore', 'Abbottabad', 'Faisalabad', 'Multan')
# Create a treated dummy column
clean_pslm_data <- clean_pslm_data %>%
mutate(
treated = ifelse(name %in% treated_districts, 1, 0)
)
# Convert datatypes to numeric
clean_pslm_data[4:30] <-sapply(clean_pslm_data[4:30], as.numeric)
# Manually run all regression
reg1 <- feols(clean_pslm_data$`POPULATION THAT HAS EVER ATTENDED SCHOOL BY-PROVINCE AND DISTRICTS 2.1` ~ treated | province_id, clean_pslm_data)
# Create a balance table
balance_table <- rbind(result1, result2, result3, result4, result5, result6, result7, result8, result9, result10, result11, result12, result13, result14, result15, result16, result17, result18, result19, result20, result21, result22, result23, result24)
invisible(sapply(packages, require, character.only = TRUE))
setwd(Outputs)
# Grouping Data by Treatment Status
# Create a list that contains districts that were visited by chief justice in 2007
treated_districts <- c('Islamabad', 'Rawalpindi', 'Sukkur', 'Hyderabad', 'Peshawar', 'Lahore', 'Abbottabad', 'Faisalabad', 'Multan')
# Create a treated dummy column
clean_pslm_data <- clean_pslm_data %>%
mutate(
treated = ifelse(name %in% treated_districts, 1, 0)
)
# Create a treated dummy column
clean_pslm_data <- clean_pslm_data %>%
mutate(
treated = ifelse(name %in% treated_districts, 1, 0)
)
pslmdf <- read_excel(paste0(Inputs, "PSLM Data.xlsx"), sheet = 1)
# Subset first three rows and remove them from dataframe
pslmdf_first3 <- pslmdf[, 1:3]
pslmdf <- pslmdf[, -c(1:3)]
# Store column names and then store columns with names
cnames <- colnames(pslmdf)
cnames <- cnames[seq(1, length(cnames), 9)]
# Remove row of metadata
pslmdf_first3 <- pslmdf_first3[-1,]
pslmdf <- pslmdf[-1,]
# Select column observations with totals only
pslmdf <- pslmdf[seq_len(ncol(pslmdf)) %% 9 == 0]
# Rename total columns manually and using stored column names
colnames(pslmdf_first3) <- c('year', 'province_id', 'name')
colnames(pslmdf) <- cnames
# Add first three rows back
clean_pslm_data <- cbind(pslmdf_first3, pslmdf)
# Store Clean Data
write_csv(clean_pslm_data, paste0(
Outputs, "clean_pslm_data.csv"))
setwd(Outputs)
# Grouping Data by Treatment Status
# Create a list that contains districts that were visited by chief justice in 2007
treated_districts <- c('Islamabad', 'Rawalpindi', 'Sukkur', 'Hyderabad', 'Peshawar', 'Lahore', 'Abbottabad', 'Faisalabad', 'Multan')
# Create a treated dummy column
clean_pslm_data <- clean_pslm_data %>%
mutate(
treated = ifelse(name %in% treated_districts, 1, 0)
)
# Subset the data for the control groups
pslmdf_control <- clean_pslm_data %>%
filter(treated == 0)
# Subset the data for the treatment groups
pslmdf_treated <- clean_pslm_data %>%
filter(treated == 1)
# De-identify districts
pslmdf_treated <- pslmdf_treated[, -c(1:3)]
pslmdf_control <- pslmdf_control[, -c(1:3)]
# Ensure datatype of columns are numeric
pslmdf_treated[] <- sapply(pslmdf_treated, as.numeric)
pslmdf_control[] <- sapply(pslmdf_control, as.numeric)
# Compute aggregate measures for balance table
control_means <- as.data.frame(colMeans(pslmdf_control))
treated_means <- as.data.frame(colMeans(pslmdf_treated))
# Combine measures and remove unnecessary row observations
means_df <- cbind(control_means, treated_means)
means_df <- means_df %>% filter(row_number() <= n()-4)
# Create p-value vector to store values from for loop
pval <- c()
# Calculate the p-values baseline differences in means using for loop
for (i in 1:24){
pval[i] <- t.test(pslmdf_control[,i], pslmdf_treated[,i],
alternative = 'two.sided',
var.equal = FALSE)$p.val
}
# Create balance table, add significance, and rename columns
balance_tbl <- cbind(means_df, pval)
balance_tbl <- balance_tbl %>%
mutate(
'Significance Level' = case_when(
pval <= 0.01 ~ "***",
pval <= 0.05 ~ "**",
pval <= 0.1 ~ "*",
pval > 0.1 ~ ""
)
)
colnames(balance_tbl) <- c("Univisited District Means", "Visited District Means", "P-Value", "Significance Level")
# Save balance table
baltable <- data.frame(balance_tbl)
png("balancetable.png", height=600, width=1400)
grid.table(baltable)
dev.off()
# Convert datatypes to numeric
clean_pslm_data[4:30] <-sapply(clean_pslm_data[4:30], as.numeric)
# Manually run all regression
reg1 <- feols(clean_pslm_data$`POPULATION THAT HAS EVER ATTENDED SCHOOL BY-PROVINCE AND DISTRICTS 2.1` ~ treated | province_id, clean_pslm_data)
reg2 <- feols(clean_pslm_data$`PERCENTAGE DISTRIBUTION OF POPULATION THAT COMPLETED PRIMARY LEVEL OR HIGHER 2.2` ~ treated | province_id, clean_pslm_data)
reg3 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE PRIMARY LEVEL(AGE 6-10)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.3(a)` ~ treated | province_id, clean_pslm_data)
reg4 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE PRIMARY LEVEL(AGE 5-9)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.3(b)` ~ treated | province_id, clean_pslm_data)
reg5 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE PRIMARY LEVEL(AGE 4-9)- BY PROVINCE & DISTRICT(INCLUDING KATCHI CLASS) 2.4` ~ treated | province_id, clean_pslm_data)
reg6 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO FOR GOVERNMENT PRIMARY SCHOOLS (AGE 5-9) - BY PROVINCE & DISTRICT 2.5` ~ treated | province_id, clean_pslm_data)
reg7 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE PRIMARY LEVEL(AGE 6-10)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.6(a)` ~ treated | province_id, clean_pslm_data)
reg8 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE PRIMARY LEVEL(AGE 5-9)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.6(b)` ~ treated | province_id, clean_pslm_data)
reg9 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE PRIMARY LEVEL(AGE 4-9)- BY PROVINCE & DISTRICT(INCLUDING KATCHI CLASS) 2.7` ~ treated | province_id, clean_pslm_data)
reg10 <- feols(clean_pslm_data$`NET ENROLMENT RATE IN GOVERNMENT PRIMARY SCHOOLS (AGE 5-9)- BY PROVINCE & DISTRICT (EXCLUDING KATCHI CLASS) 2.8` ~ treated | province_id, clean_pslm_data)
reg11 <- feols(clean_pslm_data$`PRIMARY LEVEL ENROLMENT IN GOVERNMENT SCHOOLS A PERCENTAGE OF TOTAL PRIMARY 2.9(a)` ~ treated | province_id, clean_pslm_data)
reg12 <- feols(clean_pslm_data$`PRIMARY LEVEL ENROLMENT IN GOVERNMENT SCHOOLS A PERCENTAGE OF TOTAL PRIMARY ENROLMENT - BY PROVINCE AND DISTRICT 2.9(b)` ~ treated | province_id, clean_pslm_data)
reg13 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MIDDLE LEVEL (AGE 11-13) - BY PROVINCE & DISTRICT 2.10(a)` ~ treated | province_id, clean_pslm_data)
reg14 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MIDDLE LEVEL (AGE 10-12)- BY PROVINCE & DISTRICT 2.10(b)` ~ treated | province_id, clean_pslm_data)
reg15 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MIDDLE LEVEL (AGE 11-13)- BY PROVINCE & DISTRICT 2.11(a)` ~ treated | province_id, clean_pslm_data)
reg16 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MIDDLE LEVEL (AGE 10-12)- BY PROVINCE & DISTRICT 2.11(b)` ~ treated | province_id, clean_pslm_data)
reg17 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MATRIC LEVEL(AGE 14-15)- BY PROVINCE AND DISTRICT 2.12(a)` ~ treated | province_id, clean_pslm_data)
reg18 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MATRIC LEVEL (AGE 13-14)- BY PROVINCE & DISTRICT 2.12(b)` ~ treated | province_id, clean_pslm_data)
reg19 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MATRIC LEVEL (AGE 14-15) - BY PROVINCE & REGION 2.13(a)` ~ treated | province_id, clean_pslm_data)
reg20 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MATRIC LEVEL (AGE 13-14)- BY PROVINCE & DISTRICT 2.13(b)` ~ treated | province_id, clean_pslm_data)
reg21 <- feols(clean_pslm_data$`IMMUNISATION BASED ON RECALL 3.4(a): AT LEAST 1 IMMUNISATION` ~ treated | province_id, clean_pslm_data)
reg22 <- feols(clean_pslm_data$`IMMUNISATION BASED ON RECORD 3.4(b): FULLY IMMUNIZED` ~ treated | province_id, clean_pslm_data)
reg23 <- feols(clean_pslm_data$`IMMUNISATION BASED ON RECALL AND RECORD 3.4(c): FULLY IMMUNIZED` ~ treated | province_id, clean_pslm_data)
reg24 <- feols(clean_pslm_data$`CHILDREN SUFFERING FROM DIARRHEA IN PAST 15 DAYS 3.7` ~ treated | province_id, clean_pslm_data)
# Store regression results manually
result1 <- reg1$coeftable
result2 <- reg2$coeftable
result3 <- reg3$coeftable
result4 <- reg4$coeftable
result5 <- reg5$coeftable
result6 <- reg6$coeftable
result7 <- reg7$coeftable
result8 <- reg8$coeftable
result9 <- reg9$coeftable
result10 <- reg10$coeftable
result11 <- reg11$coeftable
result12 <- reg12$coeftable
result13 <- reg13$coeftable
result14 <- reg14$coeftable
result15 <- reg15$coeftable
result16 <- reg16$coeftable
result17 <- reg17$coeftable
result18 <- reg18$coeftable
result19 <- reg19$coeftable
result20 <- reg20$coeftable
result21 <- reg21$coeftable
result22 <- reg22$coeftable
result23 <- reg23$coeftable
result24 <- reg24$coeftable
# Create a balance table
balance_table <- rbind(result1, result2, result3, result4, result5, result6, result7, result8, result9, result10, result11, result12, result13, result14, result15, result16, result17, result18, result19, result20, result21, result22, result23, result24)
# Change row names
colnames <- colnames(clean_pslm_data)
colnames <- colnames[1:31]
colnames <- colnames[4:31]
# Change row names
colnames <- colnames(clean_pslm_data)
colnames <- colnames[4:30]
colnames <- colnames[4:25]
# Change row names
colnames <- colnames(clean_pslm_data)
colnames <- colnames[4:25]
# Change row names
colnames <- colnames(clean_pslm_data)
colnames <- colnames[4:27]
row.names(balance_table) <- colnames
View(balance_table)
# Create significance star level
balance_table <- balance_table %>%
mutate(
'Significance Level' = case_when(
Pr(>|t|) <= 0.01 ~ "***",
# Create significance star level
balance_table <- balance_table %>%
mutate(
'Significance Level' = case_when(
Pr(>|t|) <= 0.01 ~ "***",
# Rename columns
colnames(balance_table) <- c("Coefficient", "Clustered Standard Error", "t-Value", "P-value")
# Create significance star level
balance_table <- balance_table %>%
mutate(
'Significance Level' = case_when(
P-Value <= 0.01 ~ "***",
P-Value <= 0.05 ~ "**",
P-Value <= 0.1 ~ "*",
P-Value > 0.1 ~ ""
)
)
# Create significance star level
balance_table <- balance_table %>%
mutate(
'Significance Level' = case_when(
'P-Value' <= 0.01 ~ "***",
'P-Value' <= 0.05 ~ "**",
'P-Value' <= 0.1 ~ "*",
'P-Value' > 0.1 ~ ""
)
)
View(balance_table)
# Convert datatypes to numeric
clean_pslm_data[4:30] <-sapply(clean_pslm_data[4:30], as.numeric)
# Manually run all regression
reg1 <- feols(clean_pslm_data$`POPULATION THAT HAS EVER ATTENDED SCHOOL BY-PROVINCE AND DISTRICTS 2.1` ~ treated | province_id, clean_pslm_data)
reg2 <- feols(clean_pslm_data$`PERCENTAGE DISTRIBUTION OF POPULATION THAT COMPLETED PRIMARY LEVEL OR HIGHER 2.2` ~ treated | province_id, clean_pslm_data)
reg3 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE PRIMARY LEVEL(AGE 6-10)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.3(a)` ~ treated | province_id, clean_pslm_data)
reg4 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE PRIMARY LEVEL(AGE 5-9)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.3(b)` ~ treated | province_id, clean_pslm_data)
reg5 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE PRIMARY LEVEL(AGE 4-9)- BY PROVINCE & DISTRICT(INCLUDING KATCHI CLASS) 2.4` ~ treated | province_id, clean_pslm_data)
reg6 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO FOR GOVERNMENT PRIMARY SCHOOLS (AGE 5-9) - BY PROVINCE & DISTRICT 2.5` ~ treated | province_id, clean_pslm_data)
reg7 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE PRIMARY LEVEL(AGE 6-10)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.6(a)` ~ treated | province_id, clean_pslm_data)
reg8 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE PRIMARY LEVEL(AGE 5-9)- BY PROVINCE & DISTRICT(EXCLUDING KATCHI CLASS) 2.6(b)` ~ treated | province_id, clean_pslm_data)
reg9 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE PRIMARY LEVEL(AGE 4-9)- BY PROVINCE & DISTRICT(INCLUDING KATCHI CLASS) 2.7` ~ treated | province_id, clean_pslm_data)
reg10 <- feols(clean_pslm_data$`NET ENROLMENT RATE IN GOVERNMENT PRIMARY SCHOOLS (AGE 5-9)- BY PROVINCE & DISTRICT (EXCLUDING KATCHI CLASS) 2.8` ~ treated | province_id, clean_pslm_data)
reg11 <- feols(clean_pslm_data$`PRIMARY LEVEL ENROLMENT IN GOVERNMENT SCHOOLS A PERCENTAGE OF TOTAL PRIMARY 2.9(a)` ~ treated | province_id, clean_pslm_data)
reg12 <- feols(clean_pslm_data$`PRIMARY LEVEL ENROLMENT IN GOVERNMENT SCHOOLS A PERCENTAGE OF TOTAL PRIMARY ENROLMENT - BY PROVINCE AND DISTRICT 2.9(b)` ~ treated | province_id, clean_pslm_data)
reg13 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MIDDLE LEVEL (AGE 11-13) - BY PROVINCE & DISTRICT 2.10(a)` ~ treated | province_id, clean_pslm_data)
reg14 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MIDDLE LEVEL (AGE 10-12)- BY PROVINCE & DISTRICT 2.10(b)` ~ treated | province_id, clean_pslm_data)
reg15 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MIDDLE LEVEL (AGE 11-13)- BY PROVINCE & DISTRICT 2.11(a)` ~ treated | province_id, clean_pslm_data)
reg16 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MIDDLE LEVEL (AGE 10-12)- BY PROVINCE & DISTRICT 2.11(b)` ~ treated | province_id, clean_pslm_data)
reg17 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MATRIC LEVEL(AGE 14-15)- BY PROVINCE AND DISTRICT 2.12(a)` ~ treated | province_id, clean_pslm_data)
reg18 <- feols(clean_pslm_data$`GROSS ENROLMENT RATIO AT THE MATRIC LEVEL (AGE 13-14)- BY PROVINCE & DISTRICT 2.12(b)` ~ treated | province_id, clean_pslm_data)
reg19 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MATRIC LEVEL (AGE 14-15) - BY PROVINCE & REGION 2.13(a)` ~ treated | province_id, clean_pslm_data)
reg20 <- feols(clean_pslm_data$`NET ENROLMENT RATE AT THE MATRIC LEVEL (AGE 13-14)- BY PROVINCE & DISTRICT 2.13(b)` ~ treated | province_id, clean_pslm_data)
reg21 <- feols(clean_pslm_data$`IMMUNISATION BASED ON RECALL 3.4(a): AT LEAST 1 IMMUNISATION` ~ treated | province_id, clean_pslm_data)
reg22 <- feols(clean_pslm_data$`IMMUNISATION BASED ON RECORD 3.4(b): FULLY IMMUNIZED` ~ treated | province_id, clean_pslm_data)
reg23 <- feols(clean_pslm_data$`IMMUNISATION BASED ON RECALL AND RECORD 3.4(c): FULLY IMMUNIZED` ~ treated | province_id, clean_pslm_data)
reg24 <- feols(clean_pslm_data$`CHILDREN SUFFERING FROM DIARRHEA IN PAST 15 DAYS 3.7` ~ treated | province_id, clean_pslm_data)
# Store regression results manually
result1 <- reg1$coeftable
result2 <- reg2$coeftable
result3 <- reg3$coeftable
result4 <- reg4$coeftable
result5 <- reg5$coeftable
result6 <- reg6$coeftable
result7 <- reg7$coeftable
result8 <- reg8$coeftable
result9 <- reg9$coeftable
result10 <- reg10$coeftable
result11 <- reg11$coeftable
result12 <- reg12$coeftable
result13 <- reg13$coeftable
result14 <- reg14$coeftable
result15 <- reg15$coeftable
result16 <- reg16$coeftable
result17 <- reg17$coeftable
result18 <- reg18$coeftable
result19 <- reg19$coeftable
result20 <- reg20$coeftable
result21 <- reg21$coeftable
result22 <- reg22$coeftable
result23 <- reg23$coeftable
result24 <- reg24$coeftable
# Create a balance table
balance_table <- rbind(result1, result2, result3, result4, result5, result6, result7, result8, result9, result10, result11, result12, result13, result14, result15, result16, result17, result18, result19, result20, result21, result22, result23, result24)
# Change row names
colnames <- colnames(clean_pslm_data)
colnames <- colnames[4:27]
row.names(balance_table) <- colnames
View(balance_table)
# Save balance table
baltable2 <- data.frame(balance_table)
png("balancetable2.png", height=600, width=1400)
grid.table(baltable2)
dev.off()
# Select specific columns and rename
balance_table <- balance_table %>% select(c("Estimate", "Std. Error", "Pr(>|t|)"))
View(balance_table)
colnames(balance_table) <- c("coefficient", "standard_error", "pval")
View(balance_table)
# Create significance column
balance_table <- balance_table %>%
mutate(
'Significance Level' = case_when(
pval <= 0.01 ~ "***",
pval <= 0.05 ~ "**",
pval <= 0.1 ~ "*",
pval > 0.1 ~ ""
)
)
dev.off()
baltable2 <- data.frame(balance_table)
png("balancetable2.png", height=600, width=1400)
grid.table(baltable2)
dev.off()
